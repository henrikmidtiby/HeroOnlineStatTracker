<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <script type="module" src="{{ url_for('static', filename='default/components/hero-stats.js')}}"></script>
  <script src="{{ url_for('static', filename='default/node_modules/socket.io-client/dist/socket.io.js')}}"></script>
</head>
<body>

<hero-stats 
  id="syndrael" 
  hero_name="Syndrael" 
  max_stamina=4
  max_wounds=16
  image_src="https://vignette.wikia.nocookie.net/descent2e/images/1/11/Syndrael.png/revision/latest/scale-to-width-down/200?cb=20150428132149"></hero-stats>
<hero-stats 
  id="avric" 
  hero_name="Avric" 
  max_stamina=4
  max_wounds=12
  image_src="https://vignette.wikia.nocookie.net/descent2e/images/f/fe/AvricAlbright.png/revision/latest/scale-to-width-down/200?cb=20150428132149"></hero-stats>
<hero-stats 
  id="jain" 
  hero_name="Jain" 
  max_stamina=5
  max_wounds=8
  image_src="https://vignette.wikia.nocookie.net/descent2e/images/d/d7/JainFairwood.png/revision/latest/scale-to-width-down/200?cb=20150428132150"></hero-stats>

<script type="text/javascript" charset="utf-8">
  var protocol = window.location.protocol;
  var socket = io.connect(protocol + '//' + document.domain + ':' + location.port);

  document.getElementById("syndrael").addEventListener('hero_state_changed', pass_state_change_to_server);
  document.getElementById("avric").addEventListener('hero_state_changed', pass_state_change_to_server);
  document.getElementById("jain").addEventListener('hero_state_changed', pass_state_change_to_server);

  function pass_state_change_to_server(e) 
  {
    socket.emit('hero_state_changed_message_to_server', {
      data: e.detail
    })
  }

  socket.on('hero_state_changed_from_server',
    function(msg) {
      var hero = document.getElementById(msg.data.hero_id);
      hero.set_stamina(msg.data.stamina);
      hero.set_wounds(msg.data.wounds);
    });

</script>

</body>
</html>
